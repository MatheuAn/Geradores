<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerar Anime</title>
    <link rel="stylesheet" href="https://matheuan.github.io/Geradores/gerarEp.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800;900&family=Pathway+Extreme&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
  <h1>GERAR ANIME</h1>
  <form action="#" method="post">
    <!-- Your form questions go here... -->
    <div class="t">LINKS</div>
    <label class="lab1 lab1-1">Sua lista de episódios :<a class="a" href="#"></a></label>
    <input type="text" id="listaeps" onchange="substituirLink()"><br>
    
    <div class="opT">
    <span>
    <label class="lab1 lab1-2">Opening/ trailer:<a class="a"></a></label>
    <input type="text" id="youtubeLink" onchange="substituirLink()" oninput="gerarEmbed()">
    </span>
            <div id="resultadoIframe"></div>
    </div>

    <label class="lab1 lab1-3">Capa do anime:<a class="a"></a>
    <img src=""/></label>
    <input type="text" id="Capa" oninput="substituirLink()" onchange="substituirLink()"><br>

    <label class="lab1 lab1-4">Capa do anime (mobile):<a class="a"></a></label>
    <input type="text" id="Capamobile" onchange="substituirLink()"><br>
    
    


    <label class="lab1 lab1-5">Link da Temporada anterior:</label>
    <input type="text" id="linkAnterior" onchange="substituirLink()"><br>

    <label class="lab1 lab1-6">Link da Próxima Temporada:</label>
    <input type="text" id="linkProximo" onchange="substituirLink()"><br>
    
    
<div class="t">INFORMAÇÕES</div>
    <label>Título secundário:</label>
    <input type="text" class="subtitle" onchange="substituirLink()"><br>

    <label>Sinopse:</label>
    <textarea id="sinopse" rows="4" cols="50" onchange="substituirLink()"></textarea><br>

    <label>Nota:</label>
    <input placeholder="Se não possuir Nota add '0'" type="number" id="nota" onchange="substituirLink()"><br>
    
    
    <label>Estação:</label>
    <div class="checkbox-list">
      <label><input name="estacao" type="radio"> Inverno</label>
      <label><input name="estacao"type="radio"> Primavera</label>
      <label><input name="estacao" type="radio"> Outono</label>
      <label><input name="estacao" type="radio"> Verão</label>
    </div><br>

    <label>Temporada atual:</label>
    <input placeholder="Ex: 1ª Temporada" type="number" id="temporadaAtual" onchange="substituirLink()"><br>




<div class="t">DETALHES</div>
<div class="dels">
	<span>
    <label>Eps Totais:</label>
    <input placeholder="00" type="number" id="totaleps" onchange="substituirLink()"><br>
    </span>
    <span>
    	<label>Ano:</label>
    	<input placeholder="2024" type="number" class="ano" onchange="substituirLink()"><br>
    </span>
    <span>
    <label>Duração:</label>
    <input placeholder="24 min" type="number" id="duration" onchange="substituirLink()"><br>
    </span>
    <span>
    <label>Estúdio:</label>
    <input type="text" id="estudio" onchange="substituirLink()"><br>
    </span>
    <span>
    <label>País:</label>
    <input type="text" id="pais" onchange="substituirLink()"><br>
    </span>
    <span>
    <label>OVAs:</label>
    <input placeholder="00"  type="number" id="ova" onchange="substituirLink()">
    <br>
    </span>
    <span>
    <label>Filmes:</label>
    <input placeholder="00"  type="number" id="filmes" onchange="substituirLink()">
    <br>
    </span>
    <span>
    <label>Autor:</label>
    <input type="text" id="autor" onchange="substituirLink()"><br>
    </span>
    </div>
    
    <label>Tipo:</label>
    <div class="checkbox-list">
      <label><input  name="tipo" type="radio"> Dub</label>
      <label><input  name="tipo" type="radio"> Leg</label>
    </div><br>
    
    <label>Status:</label>
    <div class="checkbox-list">
      <label><input name="state" type="radio"> On</label>
      <label><input name="state" type="radio"> Off</label>
    </div><br>
    
 
    <div id="htmlGerado"></div>
    <input id="htmlGeradoText" onchange="substituirLink()">
         
    <label>Gêneros:</label>
    <div class="checkbox-generos">
  <label><input type="checkbox"> Ação</label>
  <label><input type="checkbox"> Adulto</label>
  <label><input type="checkbox"> Artes Marciais</label>
  <label><input type="checkbox"> Avant Garde</label>
  <label><input type="checkbox"> Aventura</label>
  <label><input type="checkbox"> Comédia</label>
  <label><input type="checkbox"> Comédia Romântica</label>
  <label><input type="checkbox"> Corrida</label>
  <label><input type="checkbox"> Crime</label>
  <label><input type="checkbox"> Cultivo</label>
  <label><input type="checkbox"> Demônios</label>
  <label><input type="checkbox"> Detetive</label>
  <label><input type="checkbox"> Drama</label>
  <label><input type="checkbox"> Ecchi</label>
  <label><input type="checkbox"> Espacial</label>
  <label><input type="checkbox"> Esportes</label>
  <label><input type="checkbox"> Fantasia</label>
  <label><input type="checkbox"> Ficção Científica</label>
  <label><input type="checkbox"> Gastronomia</label>
  <label><input type="checkbox"> Guerra</label>
  <label><input type="checkbox"> Harém</label>
  <label><input type="checkbox"> Hentai</label>
  <label><input type="checkbox"> Histórico</label>
  <label><input type="checkbox"> Horror</label>
  <label><input type="checkbox"> Isekai</label>
  <label><input type="checkbox"> Jogos</label>
  <label><input type="checkbox"> Josei</label>
  <label><input type="checkbox"> Magia</label>
<label><input type="checkbox"> Mecha</label>
  <label><input type="checkbox"> Militar</label>
  <label><input type="checkbox"> Mistério</label>
  <label><input type="checkbox"> Mitologia</label>
  <label><input type="checkbox"> Musical</label>
  <label><input type="checkbox"> Paródia</label>
  <label><input type="checkbox"> Policial</label>
  <label><input type="checkbox"> Política</label>
  <label><input type="checkbox"> Psicológico</label>
  <label><input type="checkbox"> Reencarnação</label>
  <label><input type="checkbox"> Romance</label>
  <label><input type="checkbox"> Samurai</label>
  <label><input type="checkbox"> Sci-fi</label>
  <label><input type="checkbox"> Slice of Life</label>
  <label><input type="checkbox"> Sobrenatural</label>
  <label><input type="checkbox"> Shonen</label>
  <label><input type="checkbox"> Shoujo</label>
  
  <label><input type="checkbox"> Sobrenatural</label>
  <label><input type="checkbox"> Super Poderes</label>
  <label><input type="checkbox"> Suspense</label>
  <label><input type="checkbox"> Terror</label>
  <label><input type="checkbox"> Vampiros</label>
  <label><input type="checkbox"> Vida Escolar</label>
  <label><input type="checkbox"> Yaoi</label>
  <label><input type="checkbox"> Yuri</label>
</div><br>
   <span>
    <label>Upload por:</label>
    <div class="checkbox-adm">
      <label><input type="radio" name="adm"> YuuNimes</label>
      <label><input type="radio" name="adm"> mStaille</label>
      <label><input type="radio" name="adm"> BLOOM</label>
      <label><input type="radio" name="adm"> Gwinsy</label>
    </div>
    </span><br>
    
    <button class="button" type="button" onclick="generateHTML()">Gerar código</button>
  </form>
  <div id="alert">
  	<h2></h2>
  </div>
  
  <div class="code" onclick="removegerou()">
<div id="generatedCode" onclick="copyToClipboard('generatedCode')"></div>
  	</body>
  </div>


<script>
  


// ordem alfabetica 
document.addEventListener("DOMContentLoaded", function() {
  var checkboxGeneros = document.querySelector('.checkbox-generos');
  var labels = Array.from(checkboxGeneros.getElementsByTagName('label'));

  // Ordena os labels alfabeticamente com base no texto do label
  labels.sort(function(a, b) {
    var textA = a.textContent.trim().toLowerCase();
    var textB = b.textContent.trim().toLowerCase();
    return textA.localeCompare(textB);
  });

  // Limpa os filhos do contêiner
  checkboxGeneros.innerHTML = '';

  // Adiciona os labels ordenados de volta ao contêiner
  labels.forEach(function(label) {
    checkboxGeneros.appendChild(label);
  });
});



// Gerar código 
function generateHTML() {
  var codeElement = document.querySelector('.code');
  var bodyElement = document.body;

  codeElement.classList.add('gerou');
  bodyElement.classList.add('gerou');
}
function removegerou() {
  var codeElement = document.querySelector('.code');
  var bodyElement = document.body;

  codeElement.classList.remove('gerou');
  bodyElement.classList.remove('gerou');
}



  // copiar 
  function copyToClipboard(elementId) {
    var element = document.getElementById(elementId);
    var range = document.createRange();
    range.selectNode(element);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand("copy");
    window.getSelection().removeAllRanges();
    alert("Texto copiado!");
  }
  
  
  
//generos 
function adicionarGenero(element) {
  var checkboxLabel = element.parentElement.textContent.trim();
  var h3Element = document.createElement('h3');
  h3Element.textContent = checkboxLabel;

  var divHtmlGerado = document.getElementById('htmlGerado');
  divHtmlGerado.appendChild(h3Element);

  exibirHTMLGerado();
    substituirLink();
}

function removerGenero(element) {
  var checkboxLabel = element.parentElement.textContent.trim();
  var h3Elements = document.querySelectorAll('#htmlGerado h3');

  h3Elements.forEach(function(h3) {
    if (h3.textContent === checkboxLabel) {
      h3.remove();
    }
  });

  exibirHTMLGerado();
    substituirLink();
}

function exibirHTMLGerado() {
  var divHtmlGerado = document.getElementById('htmlGerado');
  var htmlGerado = divHtmlGerado.innerHTML;
  document.getElementById('htmlGeradoText').value = htmlGerado;
}

window.onload = function() {
  var checkboxes = document.querySelectorAll('.checkbox-generos input[type="checkbox"]');

  checkboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function() {
      if (checkbox.checked) {
        adicionarGenero(checkbox);
      } else {
        removerGenero(checkbox);
      }
    });
  });
};



  
  // Ano
var ano = '';
document.querySelectorAll('.ano').forEach((anoInput) => {
  anoInput.addEventListener('change', function() {

    substituirLink();
  });
});

// subtitle
var subtitle = '';
document.querySelectorAll('.subtitle').forEach((subtitleInput) => {
  subtitleInput.addEventListener('change', function() {

    substituirLink();
  });
});
//ADM
var upload = '';

        document.addEventListener('DOMContentLoaded', function () {
            // Recupera o valor do localStorage
            var storedUpload = localStorage.getItem('selectedUpload');
            if (storedUpload) {
                upload = storedUpload;

                // Marca o input correspondente
                document.querySelectorAll('input[name="adm"]').forEach((radio) => {
                    if (radio.parentNode.textContent.trim() === upload) {
                        radio.checked = true;
                    }
                });
            }

            // Adiciona eventos de mudança aos inputs
            document.querySelectorAll('input[name="adm"]').forEach((radio) => {
                radio.addEventListener('change', function () {
                    if (this.checked) {
                        upload = this.parentNode.textContent.trim();

                        // Armazena o valor no localStorage
                        localStorage.setItem('selectedUpload', upload);
                    } else {
                        upload = '';
                    }

                    substituirLink();
                });
            });
        });

//Status
var state = '';
document.querySelectorAll('input[name="state"]').forEach((radio) => {
  radio.addEventListener('change', function() {
    if (this.checked) {
      state = this.parentNode.textContent.trim();
    } else {
      state = '';
    }

    substituirLink();
  });
});
//Tipo
var tipo = '';
document.querySelectorAll('input[name="tipo"]').forEach((radio) => {
  radio.addEventListener('change', function() {
    if (this.checked) {
      tipo = this.parentNode.textContent.trim();
    } else {
      tipo = '';
    }

    substituirLink();
  });
});
//Status
var estacao = '';
document.querySelectorAll('input[name="estacao"]').forEach((radio) => {
  radio.addEventListener('change', function() {
    if (this.checked) {
      estacao = this.parentNode.textContent.trim();
    } else {
      estacao = '';
    }

    substituirLink();
  });
});




document.addEventListener('DOMContentLoaded', function() {
  var checkboxes = document.querySelectorAll('.checkbox-generos input[type="checkbox"]');

  checkboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function() {
      adicionarGenero(this);
    });
  });

  function adicionarGenero(checkbox) {
    var genero = checkbox.value;

    if (checkbox.checked) {
      var genesContainer = document.querySelector('.genes');
      var novoH3 = document.createElement('h3');
      novoH3.textContent = genero;
      genesContainer.appendChild(novoH3);
    } else {
      // Se o checkbox for desmarcado, remova o h3 correspondente
      var h3s = document.querySelectorAll('.genes h3');
      h3s.forEach(function(h3) {
        if (h3.textContent === genero) {
          h3.remove();
        }
      });
    }
  }
});




function substituirLink() {
  console.log("Link substituído:", upload);
  
  
  ano = document.querySelector('.ano').value;
  subtitle = document.querySelector('.subtitle').value;
  
  var inputCapa = document.getElementById("Capa");
  var inputCapamobile = document.getElementById("Capamobile");
  var sinopse = document.getElementById("sinopse");
  var totaleps = document.getElementById("totaleps");
  var nota = document.getElementById("nota");
  var temporadaAtual = document.getElementById("temporadaAtual");
  var linkAnterior = document.getElementById("linkAnterior");
  var linkProximo = document.getElementById("linkProximo");
  var listaeps = document.getElementById("listaeps");
  var duration = document.getElementById("duration");
  var ova = document.getElementById("ova");
  var filmes = document.getElementById("filmes");
  var estudio = document.getElementById("estudio");
  var pais = document.getElementById("pais");
  var autor = document.getElementById("autor");
  var youtubeLink = document.getElementById("youtubeLink");
  var htmlGeradoText = document.getElementById("htmlGeradoText");
  
  
  
  
  var generatedCode = document.getElementById("generatedCode");
  
 
  


  // Obtém o valor do input
  /*main2*/
  var capa = inputCapa.value;
  var capamobile = inputCapamobile.value;
  var sinopse = sinopse.value;
  var totaleps = totaleps.value;
  /*main1*/
  var nota = nota.value;
  var temporadaAtual = temporadaAtual.value;
  var linkAnterior = linkAnterior.value;
  var linkProximo = linkProximo.value;
/*main3*/
  var listaeps = listaeps.value;
  var duration = duration.value;
  var ova = ova.value;
  var filmes = filmes.value;
  var estudio = estudio.value;
  var pais = pais.value;
  var autor = autor.value;
  var youtubeLink = youtubeLink.value;
  var htmlGeradoText = htmlGeradoText.value;
  
  var codigoHTML = `
  <section>
    <div id="fundopa" style="background-image: url('${capamobile}');">
    </div>
    <div class="divcapamore">
      <span id="capa">
        <img src="${capa}" />
      </span>
    </div>
    <div class="caixa1">
      <main class="main2">
        <div>
          <h8 id="sinopse">${sinopse}</h8>
        </div>
        <ul>
          <li id="ano" class="ano">${ano}</li>
          <li id="totalEps">${totaleps}</li>
          <li id="tipo">${tipo}</li>
          <li id="status">${state}</li>
        </ul>
      </main>
    <main class="main1">
      <h8 class="subtitle">${subtitle}</h8>
      <h2 id="titleAnime"></h2>
      <div>
        <h2 class="topSs">${nota}</h2>
        <h4>HD</h4>
        <main>
          <h8>${estacao}</h8>
          <h8><h8 class="nT">${temporadaAtual}</h8> Temporada</h8>
        </main>
        <div class="temporada">
          <span>
            <h3 class="gen1"></h3>
            <h3 class="gen2"></h3>
            <h3 class="gen3"></h3>
            <button id="nextT"></button>
          </span>
          <span class="buttonTemp">
            <a data-text="Anterior" href="${linkAnterior}"></a>
            <a data-text="Próxima Temporada" href="${linkProximo}"></a>
          </span>
        </div>
       </div>
    </main>
    </div>
  </section>
      <main class="main3">
        <ul>
          <li class="attsection" onclick="atsection(this,'episodios')">Assistir</li>
          <li onclick="atsection(this,'ficha')">Ficha Técnica</li>
          <li onclick="atsection(this,'cast')">Cast</li>
        </ul>
      </main>
  
      <section id="episodios" class="content attsection">
        <iframe src="${listaeps}" frameborder="0" class="resizeable-iframe"></iframe>
  
      </section>
      <section id="ficha" class="content">
        <ul>
          <li>
            <p>Título Alternativo</p>
            <span>
              <h3 class="subtitle">${subtitle}</h3>
            </span>
          </li>
          <li>
            <p>Gêneros</p>
            <span class="genes">
            ${htmlGeradoText}</span>
          </li>
          <li>
            <p>Duração média</p>
            <span>
              <h3>${duration}</h3>
            </span>
          </li>
          <li>
            <p>OVAs</p>
            <span>
              <h3>${ova}</h3>
            </span>
          </li>
          <li>
            <p>Filmes</p>
            <span>
              <h3>${filmes}</h3>
            </span>
          </li>
          <li>
            <p>Estúdio </p>
            <span>
              <h3>${estudio}</h3>
            </span>
          </li>
          <li>
            <p>Ano de Estreia</p>
            <span>
              <h3 class="ano">${ano}</h3>
            </span>
          </li>
          <li>
            <p>País</p>
            <span>
              <h3>${pais}</h3>
            </span>
          </li>
          <li>
            <p>Autor</p>
            <span>
              <h3>${autor}</h3>
            </span>
          </li>
          <li>
            <p>Upload por</p>
            <span>
            <h3>${upload}</h3>
            </span>
          </li>
<div class="youtubeContainer" data-link-embed="${youtubeLink}"></div>
        </ul>
      </section>
      <section id="cast" class="content">
        <ul>
        </ul>
      </section>
  
 
  
  `;

var capaInput = document.getElementById('Capa');
var imagem = document.querySelector('.lab1 img');
imagem.src = capaInput.value;
  generatedCode.textContent = codigoHTML;

}



function gerarEmbed() {
  var inputLink = document.getElementById('youtubeLink').value;
  var videoId = extrairID(inputLink);
  var embedLink = "https://www.youtube.com/embed/" + videoId;

  // Atualiza a div com a iframe do vídeo
  var resultadoIframeDiv = document.getElementById('resultadoIframe');
  resultadoIframeDiv.innerHTML = `
      <iframe width="560" height="315" src="${embedLink}" frameborder="0" allowfullscreen></iframe>
    `;
}

function extrairID(link) {
  // Extrai o ID do vídeo do link do YouTube
  var match = link.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
  return match ? match[1] : '';
}
</script>
</body>
</html>
